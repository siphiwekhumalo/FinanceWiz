 Problem: Why your â€œCompareâ€ overlay doesnâ€™t look like ChartIQ's?
âœ… Your chart (Image 1):
GOOGL line is plotted with jagged drops.

Doesnâ€™t align visually or logically with AAPL candles.

Seems scaled to absolute price (GOOGL price = ~$120s, while AAPL = $170s).

No baseline or relative zero anchor shown.

âœ… ChartIQ chart (Image 2):
Overlay (BH) starts from the same visual baseline as the base symbol (AAPL).

It shows relative movement, not absolute prices.

Vertical axis shows percentage change (+3.5%, -5%, etc.)

Y-axis adjusts to fit both plots comparatively â€” even if underlying values differ.

ğŸ§  What ChartIQ is doing (and youâ€™re not â€” yet):
1. âœ… Compare mode is â€œNormalized to % Changeâ€
They show â€œHow did BH move relative to AAPLâ€, not raw prices.

2. âœ… Both symbols start from 0% on the y-axis
The Y-axis becomes % movement from the starting candle.

3. âœ… Chart overlays use relative scaling
The comparison line is visually aligned to the base, regardless of actual value.

ğŸ”§ How You Can Match ChartIQâ€™s Compare Feature
Hereâ€™s exactly how to fix this.

âœ… 1. Normalize Compare Series to % Change
For every compare symbol:

ts
Copy
Edit
const baseValue = compareData[0].value;
const normalized = compareData.map(d => ({
  time: d.time,
  value: ((d.value - baseValue) / baseValue) * 100  // percentage
}));
This makes the compare series start from 0% and move up/down in percent â€” just like ChartIQ.

âœ… 2. Change the Compare Y-Axis to % Format
If you're using LightweightCharts, do:

ts
Copy
Edit
chart.addLineSeries({
  priceScaleId: 'overlay',  // separate scale
  priceFormat: {
    type: 'percent',
    precision: 2,
    minMove: 0.01
  },
});
This will:

Show Y-axis as %

Visually align the base and compare from same anchor

ğŸ’¡ You can even merge scales if desired, but it's better to use a separate scale for clarity.

âœ… 3. Sync Start Times and Timestamps
Make sure:

Base and compare series start from the same time

All timestamps are aligned per timeframe

If compare data starts late or has missing intervals, youâ€™ll get visual offsets.

âœ… 4. Style the Compare Line
Make it visually different (line or area chart), e.g.:

ts
Copy
Edit
chart.addLineSeries({
  color: '#4caf50',
  lineWidth: 2,
  priceScaleId: 'overlay'
});
ğŸ§ª Optional Enhancements
Feature	Description
ğŸ” Toggle between â€œ% Compareâ€ and â€œAbsolute Overlayâ€	Give users both views
ğŸ“ˆ Indicator-style overlay	Plot relative line in separate pane
ğŸ§© Dual y-axis	Left for base, right for compare (if not normalized)
ğŸ” Tooltip sync	Show % change in tooltip (even if price hidden)

âœ… Summary
Feature	Yours	ChartIQ
Compare series format	Absolute prices	% normalized to base
Alignment baseline	Different starting points	Same baseline (0%)
Y-axis	Raw values	Percentage axis
Overlay logic	Over raw candles	Over shared % movement

